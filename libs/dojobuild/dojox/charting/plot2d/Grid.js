//>>built
define("dojo/_base/lang,dojo/_base/declare,dojo/_base/array,dojo/sniff,./CartesianBase,./common,dojox/lang/utils,dojox/gfx/fx".split(","),function(j,p,l,n,q,r,k,s){return p("dojox.charting.plot2d.Grid",q,{defaultParams:{hMajorLines:!0,hMinorLines:!1,vMajorLines:!0,vMinorLines:!1,hStripes:!1,vStripes:!1,animate:null,enableCache:!1,renderOnAxis:!0},optionalParams:{majorHLine:{},minorHLine:{},majorVLine:{},minorVLine:{}},constructor:function(c,a){this.opt=j.clone(this.defaultParams);k.updateWithObject(this.opt,
a);k.updateWithPattern(this.opt,a,this.optionalParams);this.animate=this.opt.animate;if(this.opt.enableCache)this._lineFreePool=[],this._lineUsePool=[]},addSeries:function(){return this},getSeriesStats:function(){return j.delegate(r.defaultStats)},cleanGroup:function(){this.inherited(arguments);if(this.opt.enableCache)this._lineFreePool=this._lineFreePool.concat(this._lineUsePool),this._lineUsePool=[]},createLine:function(c,a){var d;this.opt.enableCache&&0<this._lineFreePool.length?(d=this._lineFreePool.pop(),
d.setShape(a),c.add(d)):d=c.createLine(a);this.opt.enableCache&&this._lineUsePool.push(d);return d},render:function(c,a){if(this.zoom)return this.performZoom(c,a);this.dirty=this.isDirty();if(!this.dirty)return this;this.cleanGroup();var d=this.getGroup(),e=this.chart.theme,g,m=this.opt.renderOnAxis;if(6>n("ios")||n("android")){var f=Math.max(0,c.width-a.l-a.r),j=Math.max(0,c.height-a.t-a.b);d.createRect({x:a.l,y:a.t,width:f,height:j})}if(this._vAxis){var h=this._vAxis.getScaler();if(h){var k=h.scaler.getTransformerFromModel(h),
f=this._vAxis.getTicks();null!=f&&(this.opt.hMinorLines&&(g=this.opt.minorHLine||e.grid&&e.grid.minorLine||e.axis.minorTick,l.forEach(f.minor,function(b){if(m||b.value!=(this._vAxis.opt.leftBottom?h.bounds.from:h.bounds.to))b=c.height-a.b-k(b.value),b=this.createLine(d,{x1:a.l,y1:b,x2:c.width-a.r,y2:b}).setStroke(g),this.animate&&this._animateGrid(b,"h",a.l,a.r+a.l-c.width)},this)),this.opt.hMajorLines&&(g=this.opt.majorHLine||e.grid&&e.grid.majorLine||e.axis.majorTick,l.forEach(f.major,function(b){if(m||
b.value!=(this._vAxis.opt.leftBottom?h.bounds.from:h.bounds.to))b=c.height-a.b-k(b.value),b=this.createLine(d,{x1:a.l,y1:b,x2:c.width-a.r,y2:b}).setStroke(g),this.animate&&this._animateGrid(b,"h",a.l,a.r+a.l-c.width)},this)))}}if(this._hAxis){var i=this._hAxis.getScaler();if(i){var o=i.scaler.getTransformerFromModel(i),f=this._hAxis.getTicks();null!=this&&(f&&this.opt.vMinorLines&&(g=this.opt.minorVLine||e.grid&&e.grid.minorLine||e.axis.minorTick,l.forEach(f.minor,function(b){if(m||b.value!=(this._hAxis.opt.leftBottom?
i.bounds.from:i.bounds.to))b=a.l+o(b.value),b=this.createLine(d,{x1:b,y1:a.t,x2:b,y2:c.height-a.b}).setStroke(g),this.animate&&this._animateGrid(b,"v",c.height-a.b,c.height-a.b-a.t)},this)),f&&this.opt.vMajorLines&&(g=this.opt.majorVLine||e.grid&&e.grid.majorLine||e.axis.majorTick,l.forEach(f.major,function(b){if(m||b.value!=(this._hAxis.opt.leftBottom?i.bounds.from:i.bounds.to))b=a.l+o(b.value),b=this.createLine(d,{x1:b,y1:a.t,x2:b,y2:c.height-a.b}).setStroke(g),this.animate&&this._animateGrid(b,
"v",c.height-a.b,c.height-a.b-a.t)},this)))}}this.dirty=!1;return this},_animateGrid:function(c,a,d,e){s.animateTransform(j.delegate({shape:c,duration:1200,transform:[{name:"translate",start:"h"==a?[d,0]:[0,d],end:[0,0]},{name:"scale",start:"h"==a?[1/e,1]:[1,1/e],end:[1,1]},{name:"original"}]},this.animate)).play()}})});