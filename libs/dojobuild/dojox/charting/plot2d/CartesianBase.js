//>>built
define("dojo/_base/lang,dojo/_base/declare,dojo/_base/connect,./Base,../scaler/primitive,dojox/gfx/fx,dojox/gfx/shape".split(","),function(m,l,n,o,k,p){return l("dojox.charting.plot2d.CartesianBase",o,{constructor:function(a,c){this.axes=["hAxis","vAxis"];this.zoom=null;this.zoomQueue=[];this.lastWindow={vscale:1,hscale:1,xoffset:0,yoffset:0};this.hAxis=c&&c.hAxis||"x";this.vAxis=c&&c.vAxis||"y";this.series=[]},clear:function(){this.inherited(arguments);this._vAxis=this._hAxis=null;return this},cleanGroup:function(a,
c){this.inherited(arguments);if(!c&&this.chart._nativeClip){var d=this.chart.offsets,b=this.chart.dim,e=Math.max(0,b.width-d.l-d.r),b=Math.max(0,b.height-d.t-d.b);this.group.setClip({x:d.l,y:d.t,width:e,height:b});if(!this._clippedGroup)this._clippedGroup=this.group.createGroup()}},purgeGroup:function(){this.inherited(arguments);this._clippedGroup=null},getGroup:function(){return this._clippedGroup||this.group},setAxis:function(a){a&&(this[a.vertical?"_vAxis":"_hAxis"]=a);return this},toPage:function(a){var c=
this._hAxis,d=this._vAxis,b=c.getScaler(),e=d.getScaler(),f=b.scaler.getTransformerFromModel(b),g=e.scaler.getTransformerFromModel(e),h=this.chart.getCoords(),i=this.chart.offsets,j=this.chart.dim,b=function(b){var a={};a.x=f(b[c.name])+h.x+i.l;a.y=h.y+j.height-i.b-g(b[d.name]);return a};return a?b(a):b},toData:function(a){var c=this._hAxis,d=this._vAxis,b=c.getScaler(),e=d.getScaler(),f=b.scaler.getTransformerFromPlot(b),g=e.scaler.getTransformerFromPlot(e),h=this.chart.getCoords(),i=this.chart.offsets,
j=this.chart.dim,b=function(b){var a={};a[c.name]=f(b.x-h.x-i.l);a[d.name]=g(h.y+j.height-b.y-i.b);return a};return a?b(a):b},isDirty:function(){return this.dirty||this._hAxis&&this._hAxis.dirty||this._vAxis&&this._vAxis.dirty},performZoom:function(a,c){var d=this._vAxis.scale||1,b=this._hAxis.scale||1,e=a.height-c.b,f=this._hScaler.bounds,f=(f.from-f.lower)*f.scale,g=this._vScaler.bounds,g=(g.from-g.lower)*g.scale,h=d/this.lastWindow.vscale,i=b/this.lastWindow.hscale,j=(this.lastWindow.xoffset-f)/
(1==this.lastWindow.hscale?b:this.lastWindow.hscale),k=(g-this.lastWindow.yoffset)/(1==this.lastWindow.vscale?d:this.lastWindow.vscale),l=this.getGroup(),e=p.animateTransform(m.delegate({shape:l,duration:1200,transform:[{name:"translate",start:[0,0],end:[c.l*(1-i),e*(1-h)]},{name:"scale",start:[1,1],end:[i,h]},{name:"original"},{name:"translate",start:[0,0],end:[j,k]}]},this.zoom));m.mixin(this.lastWindow,{vscale:d,hscale:b,xoffset:f,yoffset:g});this.zoomQueue.push(e);n.connect(e,"onEnd",this,function(){this.zoom=
null;this.zoomQueue.shift();0<this.zoomQueue.length&&this.zoomQueue[0].play()});1==this.zoomQueue.length&&this.zoomQueue[0].play();return this},initializeScalers:function(a,c){this._hAxis?(this._hAxis.initialized()||this._hAxis.calculate(c.hmin,c.hmax,a.width),this._hScaler=this._hAxis.getScaler()):this._hScaler=k.buildScaler(c.hmin,c.hmax,a.width);this._vAxis?(this._vAxis.initialized()||this._vAxis.calculate(c.vmin,c.vmax,a.height),this._vScaler=this._vAxis.getScaler()):this._vScaler=k.buildScaler(c.vmin,
c.vmax,a.height);return this}})});